# toDoctor — сервис для записи к врачу
## Краткое описание информационной системы
toDoctor будет использоваться в роли системы записи к врачу в определённой больнице. Пользователь сможет быстро, без сложной процедуры регистрации (авторизация будет производиться через Telegram, это занимает куда меньше времени) записаться к интересующему его специалисту.
# Техническое задание
### 1. Обзор проекта:
Цель данного проекта — создание системы записи к врачу для оптимизации и упрощения процесса записи на прием. Система будет предоставлять пользователям удобный интерфейс для записи к врачу, отмены записи и просмотра истории своих предыдущих записей. Дополнительно, предусмотрена система авторизации через мессенджер Telegram для повышения безопасности и удобства пользования.
### 2. Функциональные требования:
2.1. **Система авторизации:**
   - Реализация авторизации пользователей через мессенджер Telegram.
   - Защита от несанкционированного доступа.

2.2. **Запись к врачу:**
   - Возможность выбора врача из списка специалистов.
   - Календарь с доступными датами и временем для записи.
   - Подтверждение записи с отправкой уведомления пользователю.

2.3. **Отмена записи:**
   - Возможность отмены записи к врачу.
   - Подтверждение отмены с отправкой уведомления пользователю.

2.4. **Просмотр истории записей:**
   - Отображение списка предыдущих записей пользователя.
   - Детали каждой записи, включая врача, дату и статус.

### 3. Технологический стек:
3.1. **Backend:**
   - Язык программирования: PHP.
   - Система управления базами данных: MySQL.

3.2. **Frontend:**
   - Языки программирования: JavaScript, HTML, CSS.
   - Использование фреймворка Bootstrap для улучшения дизайна и адаптивности.

3.3. **Безопасность:**
   - Шифрование данных при передаче.
   - Защита от SQL-инъекций и других видов атак.

3.4. **Интеграция с мессенджером Telegram:**
   - Использование Telegram API для реализации системы авторизации.

### 4. Заключение:
Цель проекта - создать эффективную и безопасную систему записи к врачу, удовлетворяющую потребности пользователей в удобстве и прозрачности процесса. Реализация системы авторизации через Telegram и интуитивно понятный интерфейс должны обеспечить высокую степень удовлетворенности пользователей.

# Пользовательские сценарии
### Сценарии работы пользователя
1. Неавторизованный пользователь заходит на сайт, где на главной странице после описания ему предложено авторизоваться. Нажав на кнопку "Авторизоваться" его редиректит на страницу авторизации с соответствующей кнопкой — виджетом Telegram. Авторизовавшись, пользователь попадает в свой профиль.
2. В профиле пользователь видит историю своих записей к врачу со статусом "Принят" или "Не принят". Если статус "Не принят", то пользователь сразу же может отменить запись. Если статус "Принят", то пользователь не может отменить запись.
3. Нажав на кнопку "Записаться к врачу" пользователь попадает на страницу записи к врачу. Выбрав нужного ему специалиста пользователь может выбрать дату и время записи, после чего записаться.

### Сценарии работы администратора
1. В личном кабинете пользователя, если он является администратором, имеется кнопка для перехода в административную панель. 
2. В панели администратор может перейти на страницы:
+ **Пользователи** — отображение всех пользователей, зарегистрированных в системе. Возможность назначить пользователя администратором, снять пользователя с этой должности или удалить его из системы.
+ **Врачи** — отображение всех врачей, добавленных администратором в систему. Возможность добавления нового врача, его редактирование и удаление.
+ **Записи** — отображение всех записей к врачам. Администратору доступна возможность принять запись.
+ **Номера** — отображение всех номеров к врачу. Администратору доступна возможность добавить новый номерок или удалить ненужный.

# Интерфейс
![index](https://github.com/m1ssha/toDoctor/blob/main/github-images/index.jpg?raw=true)
![profile](https://github.com/m1ssha/toDoctor/blob/main/github-images/profile.jpg?raw=true)
![doctors](https://github.com/m1ssha/toDoctor/blob/main/github-images/doctors.jpg?raw=true)
![panel](https://github.com/m1ssha/toDoctor/blob/main/github-images/panel.jpg?raw=true)
![admin-panel-page](https://github.com/m1ssha/toDoctor/blob/main/github-images/admin-panel-page.jpg?raw=true)
# Диаграммы
![Изображение](https://github.com/m1ssha/toDoctor/blob/main/github-images/database.png?raw=true)
# Документация
Пример OpenAPI
```
openapi: 3.0.0
info:
  title: toDoctor API
  description: toDoctor API in Swagger
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 0.0.0
servers:
  - url: http://127.0.0.1/
tags:
  - name: auth
    description: Авторизация
  - name: user
    description: Пользователь
  - name: doctors
    description: Врачи
  - name: admin
    description: админ-панель
paths:
  /auth/logic/auth:
    post:
      tags:
        - auth
      summary: Авторизация пользователя через Telegram
      description: Создание пользователя в базе данных с данными из Telegram
      operationId: authUser
      requestBody:
        description: Add user to system
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/auth'
          application/xml:
            schema:
              $ref: '#/components/schemas/auth'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/auth'
            application/xml:
              schema:
                $ref: '#/components/schemas/auth'
        '400':
          description: bad request
  /auth/logic/logout:
    get:
      summary: Выход пользователя из аккаунта
      operationId: userLogout
      responses:
        default:
          description: success
      tags:
        - auth
  /user/profile/:
    get:
      tags:
        - user
      summary: Получение данных о пользователе
      description: Рендер пользовательского профиля
      operationId: getUserInfo
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/user'
            application/xml:
              schema:
                $ref: '#/components/schemas/user'
        '400':
          description: access denied
    delete:
      tags:
        - user
      summary: Удаление записи к врачу
      responses:
        '200':
          description: successful operation
```
Используемые API методы:
```
AUTH:
GET /auth/logic/logout - выход из аккаунта
POST /auth/logic/auth - создание данных пользователя
PUT /auth/logic/auth - обновление данных пользователя
USER:
GET /user/profile - получение данных профиля
GET /user/enrolls - получение данных о записях к врачу
DELETE /user/enrolls - удаление записи к врачу
DOCTORS:
GET /enroll/doctors - получение данных о доступных специалистах
GET /enroll/enroll - получение данных о конкретном специалисте
POST /enroll/enroll - запись к врачу
ADMIN:
GET /admin/users - получение данных всех пользователей
GET /admin/doctors - получение данных всех врачей
GET /admin/numbers - получение данных всех номеров
GET /admin/enrolls - получение данных всех записей
PUT /admin/doctors/{doctor_id} - обновление данных конкретного врача
PUT /admin/users/{user_id} - обновление прав пользователя (назначение и снятие админ-прав)
DELETE /admin/users/{user_id} - удаление пользователя из системы
DELETE /admin/doctors/{doctor_id} - удаление врача из системы
DELETE /admin/enrolls/{enroll_id} - удаление записи из системы
```
Полная документация находится по ссылке: **<https://github.com/m1ssha/toDoctor/blob/main/openapi.yaml>**
# Развёртывание
Чтобы установить приложение на своем сервере или локальной машине в директории /var/www/html, выполните следующие шаги в терминале:
1. Склонируйте репозиторий с помощью команды:
   ```
   git clone https://github.com/m1ssha/toDoctor.git
   ```
2. Импортируйте дамп базы данных через phpMyAdmin.
3. Настройте необходимые параметры в файле database/config.php.
4. Для использования авторизации через Telegram создайте бота с помощью @BotFather и укажите домен вашего сервера (это может быть домен или IP) с помощью команды /setdomain.

# Скрины проекта
![Главная страница](https://i.imgur.com/oSedRt9.jpg)
![Авторизация](https://i.imgur.com/OLdB2cl.jpg)
# Выводы
В ходе курсовой работы будет разработано Web-приложение для записи к врачу. Документация, охватывающая методы API и развертывание, служит основой для Backend и Frontend. Проект сфокусирован на создании эффективного, надежного и удобного приложения.